{% load static %}
<!DOCTYPE html>
<html>

<head>
  <title>Y Test</title>
  <!-- Add custom CSS for styling -->
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>

<body>
  <h2>Y Test</h2>
  <form method="POST">
    {% csrf_token %} {{ form.as_p }}
    <label for="profile_search">Select Profile:</label>
    <input type="text" id="profile_search" placeholder="Search profiles..." autocomplete="off">
    <ul id="profile_list" class="dropdown-content">
      {% for profile in profiles %}
      <li data-value="{{ profile.id }}">{{ profile.surname }} {{ profile.name }}</li>
      {% endfor %}
    </ul>
    <input type="hidden" name="profile_id" id="profile_id">
    <button type="submit">Submit</button>
  </form>
  <!-- Include jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    // Same JavaScript as in ladder_test.html
    $(document).ready(function () {
      $('#profile_search').on('keyup focus', function () {
        var value = $(this).val().toLowerCase();
        $('#profile_list li').filter(function () {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
        });
        $('#profile_list').show();
      });

      $('#profile_list li').on('click', function () {
        var selectedText = $(this).text();
        var selectedValue = $(this).data('value');
        $('#profile_search').val(selectedText);
        $('#profile_id').val(selectedValue);
        $('#profile_list').hide();
      });

      $(document).on('click', function (e) {
        if (!$(e.target).closest('#profile_search, #profile_list').length) {
          $('#profile_list').hide();
        }
      });
    });
  </script>
</body>

</html>