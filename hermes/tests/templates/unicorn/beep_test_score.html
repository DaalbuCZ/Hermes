<div>
    <form class="calculator-form" unicorn:submit="save_results">
        <div class="input-group">
            <label>Level:</label>
            <input type="number" step="1" name="beep_test_level" unicorn:model="level"
                unicorn:change="calculate_beep_test_score" value="{{ level }}">
        </div>
        <div class="input-group">
            <label>Laps (optional):</label>
            <input type="number" step="1" name="beep_test_laps" unicorn:model="laps"
                unicorn:change="calculate_beep_test_score" value="{{ laps }}">
        </div>
        <div class="input-group">
            <label>Max Heart Rate:</label>
            <input type="number" step="1" name="max_hr" unicorn:model="max_hr" value="{{ max_hr }}">
        </div>
        <div class="score-display">
            {% if total_laps is not None %}
            <div>Total Laps: {{ total_laps }}</div>
            <div>Score: {{ score }}</div>
            {% else %}
            <div>Enter level and laps to calculate score</div>
            {% endif %}
        </div>
        <button type="submit" class="submit-button" {% if not profile_id %}disabled{% endif %}>Save Results</button>
    </form>
    <div class="previous-results">
        <h3>Previous Test Results</h3>
        <div class="previous-result" unicorn:if="previous_result">
            <div>Previous Level: {{ previous_result.beep_test_level }}</div>
            <div>Previous Laps: {{ previous_result.beep_test_laps }}</div>
            <div>Previous Score: {{ previous_result.beep_test_score }}</div>
        </div>
    </div>
</div>